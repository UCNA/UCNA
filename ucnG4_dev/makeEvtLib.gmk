ObjSuf        = o
SrcSuf        = cc
DllSuf        = so
OutPutOpt     = -o  

ROOTCFLAGS    = $(shell root-config --cflags)

# Work with Linux with egcs	
CXX           = g++ 
#CXX           = mpiCC
CXXFLAGS      = -O3 -Wall -fPIC #-m32
LD            = $(CXX)
SOFLAGS       = -shared #-m32 `root-config --libs`

CXXFLAGS     += $(ROOTCFLAGS)

libMCEvent.so: dict bmMCEventDict.o bmMCEvent.o \
		bmTrackInfoDict.o bmTrackInfo.o \
		bmPrimaryInfoDict.o bmPrimaryInfo.o
	@echo "Linking libMCEvent.so..."
	@rm -f libMCEvent.so
	@echo "$(LD) $(SOFLAGS) bmMCEventDict.o bmMCEvent.o bmTrackInfoDict.o bmTrackInfo.o bmPrimaryInfoDict.o bmPrimaryInfo.o $(OutPutOpt) libMCEvent.so"
	@$(LD) $(SOFLAGS) bmMCEventDict.o bmMCEvent.o bmTrackInfoDict.o bmTrackInfo.o bmPrimaryInfoDict.o bmPrimaryInfo.o $(OutPutOpt) libMCEvent.so
	@chmod 555 libMCEvent.so
	@echo "done"

dict:   bmMCEventDict.h bmTrackInfoDict.h bmPrimaryInfoDict.h

bmMCEventDict.h: bmMCEvent.hh
	rootcint -f  bmMCEventDict.C -c bmMCEvent.hh

bmTrackInfoDict.h: bmTrackInfo.hh
	rootcint -f  bmTrackInfoDict.C -c bmTrackInfo.hh

bmPrimaryInfoDict.h: bmPrimaryInfo.hh
	rootcint -f  bmPrimaryInfoDict.C -c bmPrimaryInfo.hh

######################################################################
# Generic compilation of object file
%: %.$(ObjSuf)
	$(CXX) $(CXXFLAGS) -c %.$(SrcSuf)

clean:
		@rm -f *.o *~  core






